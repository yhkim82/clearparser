#summary Phrase-to-dependency converter: guidelines

= Clear phrase-to-dependency converter =

_Clear phrase-to-dependency converter_ takes phrase structure trees in [http://www.cis.upenn.edu/~treebank/ Penn Treebank format] as input and generates corresponding dependency trees in [DataFormat Clear format] as output.  The tool allows users to customize their own head-percolation rules.  It currently supports only English (support for Chinese is expected soon).

== How to run ==

On the terminal, type the following command.

{{{
Usage: java clear.engine.PhraseToDep -i <input-file> -o <output-file> -h <headrule-file> [-m <dictionary-directory> -l <language=ch|en>]
}}}

 * input file: name of a file containing phrase structure trees.
 * output file: name of a file containing dependency trees converted from the input file.
 * headrule file: name of a file containing head-percolation rules.
 * dictionary directory: path of a directory containing dictionaries for [MorphAnalyzerGuidelines Clear morphological analyzer].  If the directory is not specified, it uses word-forms as lemmas.
 * language: `ch` - Chinese (not supported yet), `en` - English (default)

'`dat`' directory includes a sample input file (`dat/sample.phrase`),  '`headrules`' directory includes a default headrule file (`headrules/choi.headrules`), and '`en_dict`' directory includes default dictionary files for English.  The following command converts phrase structure trees in '`dat/sample.phrase`' to dependency trees in '`dat/sample.dep`' by using head-percolation rules in '`headrules/choi.headrules`' and dictionaries in '`en_dict`'.

{{{
java clear.engine.PhraseToDep -i dat/sample.phrase -o dat/sample.dep -h headrules/choi.headrules -m en_dict/
}}}

== Input file ==

_Input file_ contains [http://www.cis.upenn.edu/~treebank/ Penn Treebank style] phrase structure trees.  Each tree starts with either an empty phrase (example 1) or a `TOP`-phrase (example 2).

 * Example 1
{{{
((S (NP-SBJ (NP (DT The)
                    (ADJP (RBS most)
                          (JJ important))
                    (NN thing))
                (PP (IN about)
                    (NP (NNP Disney))))
        (VP (VBZ is)
            (SBAR-PRD (IN that)
                      (S (NP-SBJ (PRP it))
                         (VP (VBZ is)
                             (NP-PRD (DT a)
                                     (JJ global)
                                     (NN brand))))))
        (. .)))
}}}

 * Example 2
{{{
(TOP (S (NP-SBJ (NP (DT The)
                    (NN world)
                    (POS 's))
                (JJ fifth)
                (NNP Disney)
                (NN park))
        (VP (MD will)
            (ADVP-TMP (RB soon))
            (VP (VB open)
                (PP-CLR (IN to)
                        (NP (DT the)
                            (NN public)))
                (ADVP-LOC (RB here))))
        (. .)))
}}}

== Headrule file ==

_Headrule file_ contains head-percolation rules for all phrases/clauses.  Each line consists of rules for a phrase/clause.  The following shows a format of each line.

{{{
<pos-tag><tab><direction=l|r><tab><rule>(;<rule>)*
}}}
 * pos-tag: phrasal or clausal level [http://bulba.sdsu.edu/jeanette/thesis/PennTags.html part-of-speech tag]
 * direction: `l` - find the leftmost head, `r` - find the rightmost head
 * rule: pos-tag/function-tag rules in [http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html Java regular expression format]

Here are sample rules for noun-phrases (`NP`) and verb-phrases (`VP`).

{{{
NP  r  NN.*|NML;NX;PRP;FW;CD;NP|QP|JJ.*|VB.*;ADJP;S;SBAR;.*
VP  l  TO;MD;VB.*;VP;-PRD;NN;NNS;NP;QP;JJ.*;ADJP;.*
}}}

 * For `NP`, it first looks for the rightmost '`NN.*|NML'`: the rule covers `NN`, `NNS`, `NNP`, `NNPS`, and `NML`.  If such a node exists, take it as the head of the phrase; if such a node doesn't exist, it searches for the next node (`NX`).
 * '`-`' is used to indicate a function tag.  For `VP`, after searching for `TO;MD;VB.*;VP`, it looks for any node with a function tag '`PRD`'.  The [http://groups.inf.ed.ac.uk/switchboard/subcattags.html link] shows the list of function tags used for Penn Treebank.  A function tag can only be specified as a single unit (e.g., '`-PRD|SBJ`' or '`-PRD|-SBJ`' is not allowed).